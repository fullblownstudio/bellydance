<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<!--	<meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' https://fonts.gstatic.com https://fonts.googleapis.com https://www.salimpourschoolonline.com ; script-src 'self' 'unsafe-inline' https://fonts.gstatic.com https://fonts.googleapis.com https://www.salimpourschoolonline.com; style-src 'self' 'unsafe-inline' https://fonts.gstatic.com https://fonts.googleapis.com https://www.salimpourschoolonline.com; frame-src 'self' https://player.vimeo.com/video/ https://www.salimpourschoolonline.com; img-src 'self' https://www.salimpourschoolonline.com/apppics/; font-src 'self' data: fonts.gstatic.com fonts.googleapis.com https://www.salimpourschoolonline.com;" /> -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="msapplication-tap-highlight" content="no" />
    <title>Salimpour School of Belly Dance</title>
	<meta name="Description" content="Learn modern and traditional belly dance through video tutorials.">
	<link rel="icon" type="image/png" href="img/favicon.png">
	<link rel="stylesheet" href="bootstrap-3.3.7/css/cosmo.bb.min.css"/>
	<link rel="stylesheet" href="css/styles.css"/>
</head>

	<!--- comment cfclientsettings if device API's are not used 
	<cfclientsettings detectdevice="true" enabledeviceapi="true"/>--->

<body id="body">
<img src="img/bg.jpg" id="bg">	
<div class="container-fluid" style="margin: 0px 5px; position: absolute; top: 0; z-index: 0;">
	
	<div class="row">
		<div class="col-xs-12">
			<div style="margin: 0px auto; text-align: center;">
				<img src="img/logow.png" style="width: 98%; height: auto; text-align: center; border: 0px solid silver;">
			</div>
		</div> 
	</div>
	
	<!--- SPLASH SCREEN --->
	
	<div class="row box" id="splash">
		
		<form name="uphoto" id="uphoto" method="post" action="javascript:void(0);">
		<div class="col-xs-6">
			<div align="center">
				<img src="img/splash.png" class="img-responsive" style="margin-top: -5px;">
			</div>
		</div>
		<div class="col-xs-6">
			
			
			<div id="uploader" align="center" style="margin: 5% 0;">
				
				

				<input type="text" class="form-control input-lg uname" name="uname" id="uname" value="" placeholder="Your Name" style="margin: 10px 0px; border-radius: 20px; text-align: center; font-size: 18px;" required>

				<input type="text" class="form-control input-lg email" name="email" id="email" value="" placeholder="Email" style="margin: 10px 0px; border-radius: 20px; text-align: center; font-size: 18px;" required>

				<!-- photo uploader -->


				<div style="text-align: center; margin:0px; max-width: 100%;">

					<!-- <h3 align="center" style="color: white;">Take a Selfie</h3> -->

					<img class="mypic" src="img/nophoto.jpg" width="100%" height="auto" style="border: 1px solid black; border-radius: 20px;"><br />


					<label for="myphoto" style="margin: 10px auto;">
						<img src="img/takephoto.png" style="width:100%; height: auto;">
					</label>



				</div>

			</div><!-- // uploader -->
				
				
			<!--- noloader --->
				
			<div id="noloader" style="display:none;">
				
				
				<h3 class="uname" style="color: white; text-align: center;"></h3>
				<img class="mypic" src="img/nophoto.jpg" width="100%" height="auto" style="border: 1px solid black; border-radius: 20px;"><br />
				
				
			</div><!-- // noloader --->
				

				
		</div>
		
		<p>&nbsp;</p>
		
			<table class="table" id="subscribed">
				<thead>
					<tr>
						<td style="width: 60px; text-align: center;"><input type="checkbox" class="form-checkbox" name="optin" id="optin" value="1"></td>
						<td><label for="optin" style="color: white; font-size: 18px;">Send me the Salimpour School newsletter with belly dancing news and money saving coupons</label>
					</tr>
				</thead>
			</table>
			
			<div align="center">
				<button type="submit" class="btn btn-lg btn-warning login" page="home" style="height: 70px; font-size: 24px; margin: 10px auto;">
					START &nbsp; <span class="glyphicon glyphicon-chevron-right" style="font-size: 18px;"></span>
				</button>
			</div>
				
			<input type="file" name="myphoto" class="myphoto" id="myphoto" style="visibility: hidden;">
			<input type="hidden" name="photoname" id="photoname" value="nophoto.jpg">
			<input type="hidden" name="uid" id="uid" value="0">
			</form>		
		
		<div class="col-xs-12" style="text-align: center; font-family: 'Source Sans Pro', sans-serif; font-weight: 300; font-size: 46px; font-size: 6.5vw; margin: 20px auto; color: white;">
					
			MOTIVATE &bull; EDUCATE &bull; INSPIRE
			
		</div>
		
		
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>

	</div><!--- /// splash --->
	

	<!--- HOME SCREEN --->
	<div class="row box" id="home" style="display:none;">
		<div class="col-xs-12">
			
			<h3 align="center" style="color:white;">Welcome <span class="uname"></span></h3>
			
			<br />
			<div align="center">
				<!--<h1 style="color:white;">Home</h1>-->

				<p>
					<img src="img/but_drills.png" width="100%" height="auto" class="mynav" page="drills">
				</p>
				<p>
					<img src="img/but_dance.png" width="100%" height="auto" class="mynav" page="dance">
				</p>
				<p>
					<img src="img/but_combo.png" width="100%" height="auto" class="mynav" page="combo">
				</p>
				<p>
					<img src="img/izzy.png" width="100%" height="auto" class="mynav" page="splash">
				</p>

			</div>
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<p>&nbsp;</p>
		</div>
	</div>
	
	
	<!--- WARMUPS --->
	<div class="row box" id="drills" style="display:none; margin: 20px auto 40px;">
		<div class="col-xs-12">
			
			<div align="center"><img src="img/pdrills.png" width="100%" height="auto"></div>

			<div id="1"></div><!--- load warmups videos --->

		</div>
	</div>



	<!--- DANCE MOVES --->
	<div class="row box" id="dance" style="display:none; margin: 20px auto 40px;">
		<div class="col-xs-12">
			
			<div align="center"><img src="img/pdance.png" width="100%" height="auto"></div>

			<div id="2"></div><!--- load dance moves videos --->

		</div>
	</div>

	
	
	<!--- COMBO --->
	<div class="row box" id="combo" style="display:none; margin: 20px auto 40px;">
		<div class="col-xs-12">
			
			<div align="center"><img src="img/pcombo.png" width="100%" height="auto"></div>

			<div id="3"></div><!--- load combo videos --->

		</div>
	</div>



	<!--- ACCOUNT --->
	<div class="row box" id="account" style="display:none;">
		<div class="col-xs-12">
			
			<p>&nbsp;</p>
			<div align="center">
				<h3 style="color: white;"><span class="uname"></span>'s Account</h3>

<!--
            <button id='but_take'>Take photo</button>
            <button id='but_select'>Select photo from Gallery</button>
				-->
				
				
				
				<form name="xphoto" id="xphoto" method="post" action="javascript:void(0);">

				<!-- photo uploader -->

				<div style="text-align: center; margin:0px; max-width: 100%;">

					<div align="center">
					<img class="mypic" src="img/nophoto.jpg" width="100%" height="auto" style="border: 1px solid black; border-radius: 20px; max-width: 200px;">
					</div><br />

					<label for="myxphoto" style="margin: 10px auto;">
						<img src="img/takephoto.png" style="width:100%; height: auto; max-width: 200px;">
					</label>
					<input type="file" name="myxphoto" id="myxphoto" style="visibility: hidden;">


				</div>
				
				</form>
				
				<p>&nbsp;</p>
				<p>&nbsp;</p>
				<p>&nbsp;</p>

			</div>
		</div>
	</div>

	<!--- JOIN --->
	<div class="row box" id="join" style="display:none;">
		<div class="col-xs-12">
			
			<div align="center">
				<h3 class="uname" style="color: white; text-align: center;"></h3>

			<a href="https://www.salimpourschoolonline.com" target="_blank"><img src="img/freetrial.jpg" width="100%" height="auto"></a>

			</div>
			
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<p>&nbsp;</p>

		</div>
	</div>

	<div class="footer" style="text-align:center;color:silver; font-size: 12px; ">
		&copy;2019 Suhaila International, LLC | All Rights Reserved <button type="button" class="btn btn-xs btn-default" id="clearlocal">x</button>
	</div>
	<p>&nbsp;</p>
	<p>&nbsp;</p>
</div><!--- / container --->

	<div class="foot">
		<div class="row">
			<div class="col-xs-4" style="text-align: center;">
				<button type="button" class="btn btn-md btn-block footerbut" page="home" style="background-color:#f1a94e; color:#444; margin: 2px;"><span class="glyphicon glyphicon-home" style="font-size: 30px;"></span></button>
			</div>
			<div class="col-xs-4" style="text-align: center;">
				<button type="button" class="btn btn-md btn-block footerbut" page="account" style="background:#f1a94e; color:#444; margin: 2px;"><span class="glyphicon glyphicon-user" style="font-size: 30px;"></span></button>
			</div>
			<div class="col-xs-4" style="text-align: center;">
				<button type="button" class="btn btn-md btn-block footerbut" page="join" style="background:#f1a94e; color:#444; margin: 2px;"><span class="glyphicon glyphicon-star" style="font-size: 34px;"></span></button>
			</div>			
		</div>
	</div>		




</body>
	

    <!--<script type="text/javascript" src="cordova.js"></script>-->
	<script src="js/jquery-1.11.3.min.js"></script>
	<script src="bootstrap-3.3.7/js/bootstrap.min.js"></script>
	<script src="js/vimeopause.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>

<script type="text/javascript">
	
	
    // Wait for PhoneGap to load
    //document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    //function onDeviceReady() {

	
jQuery(document).ready(function($){	
	
/*	
            // take picture from camera
            $('#but_take').click(function(){      
                navigator.camera.getPicture(onSuccess, onFail, { quality: 20,
                    destinationType: Camera.DestinationType.FILE_URL 
                });
            });

            // upload select 
            $("#but_select").click(function(){
                navigator.camera.getPicture(onSuccess, onFail, { quality: 50,
                    sourceType: Camera.PictureSourceType.PHOTOLIBRARY, 
                    allowEdit: true,
                    destinationType: Camera.DestinationType.FILE_URI
                });
            });

            // Change image source and upload photo to server
            function onSuccess(imageURI) {
                // Set image source
                var image = document.getElementById('photoname');
                image.src = imageURI  + '?' + Math.random();

                var options = new FileUploadOptions();
                options.fileKey = "myxphoto";
                options.fileName = imageURI.substr(imageURI.lastIndexOf('/') + 1);
                options.mimeType = "image/jpeg";

                var params = {};
                params.value1 = "test";
                params.value2 = "param";

                options.params = params;
                options.chunkedMode = false;

                var ft = new FileTransfer();
				var uid = localStorage.uid;
                ft.upload(imageURI, 'https://www.salimpourschoolonline.com/apppics/uploadpx.cfm?uid='+uid, 
				function(data){
					
				var extension = data.substr( (data.lastIndexOf('.') +1 ) ).toLowerCase();
				//alert('x'+$.trim(extension)+'x');

					if ($.trim(extension) == 'jpg' || $.trim(extension) == 'jpeg' || $.trim(extension) == 'png') {

							localStorage.photo = data;
							$( '#photoname').val(data);
							$( '.mypic' ).attr('src', 'https://www.salimpourschoolonline.com/apppics/' + data);
							$( '.mypic' ).show('fast');					

					} else {
						
							$( '#photoname').val('');
							alert('Error: JPG, PNG images only please.');					
					}
                    alert('successfully uploaded ' + result.response);
                }, function(error){
                    alert('error : ' + JSON.stringify(error));
                }, options);
            }
            function onFail(message) {
                alert('Failed because: ' + message);
            }
	
	
	
	
	*/
	
	
	
	
	
	
	
	
	// check local db for uid 
	var uid = localStorage.uid;

	if(typeof uid != 'undefined'){
		//alert('1. local ' + uid);
		$('#uid').val(uid);
		
		if(parseInt(uid) > 0){
			
			if(localStorage.optin == 1){
				$('#optin').prop('checked', true);
				$('#subscribed').hide();
			} else {
				$('#optin').prop('checked', false);
				$('#subscribed').show();
			}

			//alert('3. yes ' + uid);
			$( '#noloader' ).show();
			$( '#uploader' ).hide();
			$( '#uid').val(localStorage.uid);
			$( '#uname').val(localStorage.uname);
			$( '.uname').html(localStorage.uname);
			$( '#email').val(localStorage.email);
			$( '.mypic' ).attr('src', 'https://www.salimpourschoolonline.com/apppics/' + localStorage.photo);
			$( '.mypic' ).show('fast');	
			$( '#photoname').val(localStorage.photo);
			
		} else {
			
			//alert('4. no ' + uid);
			
			$( '#uploader' ).show();
			$( '#noloader' ).hide();
			$( '#uid').val('0');
			$( '#uname').val('');
			$( '.uname').html('');
			$( '#email').val('');
			$( '.mypic' ).attr('src', 'img/nophoto.jpg');
			$( '.mypic' ).show('fast');	
			$( '#photoname').val('');
			
		}

	} else {
		
		localStorage.uid = 0;
		localStorage.uname = '';
		localStorage.email = '';
		localStorage.photo = '';
		localStorage.optin = '';
		$('#uid').val('0');
	}
	
	
	
	// CLEAR LOCAL STORAGE FOR DEVELOPMENT ONLY
	$(document).on('click', '#clearlocal', function() {
		localStorage.clear();
		alert('Cleared');
	});		
	
	// HANDLE CLICKS
	$(document).on('click', '.mynav', function(e) {
		e.preventDefault();
		var page = $(this).attr('page');
		
		//scroll to top of page
		document.body.scrollTop = document.documentElement.scrollTop = 0;
		
		//hide the content
		$('.box').hide();

		//fade in new content
		$( '#'+page ).fadeIn( "fast", function() {
    		// Animation complete
  		});
		
		// Retrieve
		var uname = localStorage.uname;
		$('.uname').text(uname);
				
		pauseAll();

	});		
	
	// LOGIN START BUTTON CLICK - SAVE ACCOUNT
	$(document).on('click', '.login', function(e) {
		e.preventDefault();
		var page = $(this).attr('page');
		var uid = $('#uid').val();
		var uname = $('#uname').val();
		var email = $('#email').val();
		var photo = $('#photoname').val();
		var optin = 0;
		if($("#optin").is(':checked')){
			var optin = 1;  // checked 
		}
		
		$.ajax({ 
			url: "https://www.salimpourschoolonline.com/functions.cfc",
			type: "post",
			dataType: "json",
			data: {method: "saveappacct", uid: (uid), uname: (uname), email: (email), photo: (photo), optin: (optin)},
			success: function (data){
				
				$('#uid').val(data);
				getacct();

/*			},
			error: function (xhr, textStatus, errorThrown){
			  alert(errorThrown);*/
			}

		});
		

		if(uname.length > 0){
			
			$('.box').hide();

			$( '#'+page ).fadeIn( "slow", function() {

			});
			
			pauseAll();
			
			$('.footerbut').addClass('mynav');
			
		} else {
			
			alert('Please enter your name');
			
		}

	});	

	
	
	
	// GET EXISTING ACCOUNT
	function getacct(){
		
		var uid = $('#uid').val();
		//alert('2. var ' + uid);
		
		$.ajax({
			url: "https://www.salimpourschoolonline.com/functions.cfc",
			type: "post",
			dataType: "json",
			data: {method: "getappacct", uid: (uid)},
			success: function (data){
				
				//alert('3. ret ' + data.uid);
				if(data.uid > 0){
					
					localStorage.uid = data.uid;
					localStorage.uname = data.uname;
					localStorage.email = data.email;
					localStorage.photo = data.photo;
					localStorage.optin = data.optin;
					
					if(data.optin == 1){
						$('#optin').prop('checked', true);
						$('#subscribed').hide();
					} else {
						$('#optin').prop('checked', false);
						$('#subscribed').show();
					}

					$( '#noloader' ).show();
					$( '#uploader' ).hide();
					$( '#uid').val(data.uid);
					$( '#uname').val(data.uname);
					$( '.uname').html(data.uname);
					$( '#email').val(data.email);
					$( '.mypic' ).attr('src', 'https://www.salimpourschoolonline.com/apppics/' + data.photo);
					$( '.mypic' ).show('fast');	
					$( '#photoname').val(data.photo);
					//alert('4. yes ' + uid);
				} else {
					//alert('4. no ' + uid);
					$( '#uploader' ).show();
					$( '#noloader' ).hide();
					$( '#uid').val(data.uid);
					$( '#uname').val('');
					$( '.uname').html('');
					$( '#email').val('');
					$( '.mypic' ).attr('src', 'img/nophoto.jpg');
					$( '.mypic' ).show('fast');	
					$( '#photoname').val('');
					
				}
 

/*			},
			error: function (xhr, textStatus, errorThrown){
			  alert(errorThrown);*/
			}

		});
		
	}
	
	
	
	/* UPLOAD PHOTO */
	$('#myphoto').change(function(){	

			var file = this.files[0];
			var name = file.name;
			var size = file.size;
			var type = file.type;
			// Validation
			if( type == 'image/jpeg' || type == 'image/png' ){
			//alert('jpg png ok');
			doUp(file);
			} else {
			alert('Error: JPG, PNG images only please.');
			$(this).val('');
			return false;
			}

	
	});

		function doUp(e){

		$( '.mypic' ).attr('src', 'img/loader.gif');
		$( '.mypic' ).show('fast');
		var formData = new FormData($('#uphoto')[0]);
		$.ajax({
			url: 'https://www.salimpourschoolonline.com/apppics/uploadp.cfm',  //Server script to process data
			type: 'post',
			data: formData,
			cache: false,
			contentType: false,
			processData: false,
			xhr: function() {  // Custom XMLHttpRequest
				var myXhr = $.ajaxSettings.xhr();
				if(myXhr.upload){ // Check if upload property exists
					
				}
				return myXhr;

			},
			success: function (data){ 
		
				var extension = data.substr( (data.lastIndexOf('.') +1 ) ).toLowerCase();

				if ($.trim(extension) == 'jpg' || $.trim(extension) == 'jpeg' || $.trim(extension) == 'png') {
					
						localStorage.photo = data;
						$( '#photoname').val(data);
						$( '.mypic' ).attr('src', 'https://www.salimpourschoolonline.com/apppics/' + data);
						$( '.mypic' ).show('fast');					

				} else {

					$( '#photoname').val('');
					alert('Error: JPG, PNG images only please.');						
				}


			}

		});
	};
	
	
	
	/* UPLOAD XPHOTO */
	$('#myxphoto').change(function(){
	
		var uid = $('#uid').val();
		var file = this.files[0];
		var name = file.name;
		var size = file.size;
		var type = file.type;
			// Validation
			if( type == 'image/jpeg' || type == 'image/png' ){
			//alert('jpg is ok');
			doxUp(file,uid);
			} else {
			alert('Error: JPG, PNG images only please.');
			$(this).val('');
			return false;
			}
	
	});

		function doxUp(e,uid){

		$( '.mypic' ).attr('src', 'img/loader.gif');
		$( '.mypic' ).show('fast');
		var formData = new FormData($('#xphoto')[0]);
		$.ajax({
			url: 'https://www.salimpourschoolonline.com/apppics/uploadpx.cfm?uid='+uid,  //Server script to process data
			type: 'post',
			data: formData,
			cache: false,
			contentType: false,
			processData: false,
			xhr: function() {  // Custom XMLHttpRequest
				var myXhr = $.ajaxSettings.xhr();
				if(myXhr.upload){ // Check if upload property exists
					
				}
				return myXhr;
				//alert(myXhr);
			},
			success: function (data){ 
		
				var extension = data.substr( (data.lastIndexOf('.') +1 ) ).toLowerCase();
				//alert('x'+$.trim(extension)+'x');

				if ($.trim(extension) == 'jpg' || $.trim(extension) == 'jpeg' || $.trim(extension) == 'png') {

						localStorage.photo = data;
						$( '#photoname').val(data);
						$( '.mypic' ).attr('src', 'https://www.salimpourschoolonline.com/apppics/' + data);
						$( '.mypic' ).show('fast');					

				} else {
					//alert('unknown ' + extension);
						$( '#photoname').val('');
						alert('Error: JPG, PNG images only please.');					
				}


			}

		});
	};
	
	
	
	// PAUSE ALL VIMEO VIDS
	function pauseAll() {
		
		$('.vid').each(function () {
			
			var $frame = $(this);

			// saves the current iframe source
			var vidsrc = $frame.attr('src');

			// sets the source to nothing, stopping the video
			$frame.attr('src',''); 

			// sets it back to the correct link so that it reloads immediately on the next window open
			$frame.attr('src', vidsrc);
			
		});
		
	};

	
	// GET VIDS
	function getvids(){ 

		$.ajax({
			url: "https://www.salimpourschoolonline.com/functions.cfc",
			type: "post",
			dataType: "json",
			data: {method: "getappvids"},
			success: function (data){
				//alert(data);
				
				jQuery(data).each(function(i, item){
	
    				//alert('catid = ' + item.catid + ' vimeoid = ' + item.vimeoid + ' title = ' + item.title + ' desc = ' +item.description);

					$('#'+item.catid).append('<h3 style="color: white;">' + item.title + '</h3><span style="color:white;">' + item.description +'<p><div class="videoWrapper"><iframe class="vid" src="https://player.vimeo.com/video/'+ item.vimeoid +'" width="850" height="624" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div><br /></p>');

				})


/*			},
			error: function (xhr, textStatus, errorThrown){
			  alert(errorThrown);*/
			}

		});
		
	};	
	
	getvids();
	
	
}); 
	
</script>

</html>